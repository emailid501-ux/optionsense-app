<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OptionSense - Stock Trading Signals</title>
    <meta name="description"
        content="Real-time stock recommendations with Fibonacci, RSI, MACD analysis. Individual stocks and Index sentiment.">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#00d4ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="OptionSense">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="OptionSense">
    <meta name="msapplication-TileColor" content="#0a0a0f">
    <meta name="msapplication-tap-highlight" content="no">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="icons/icon.svg">
    <link rel="apple-touch-icon" href="icons/icon.svg">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="logo">
                <span class="logo-icon">üìä</span>
                <span class="logo-text">Option<span class="accent">Sense</span></span>
                <span class="live-indicator">üî¥ LIVE</span>
            </div>
            <div class="header-right">
                <div class="market-status" id="marketStatus">
                    <span class="status-dot"></span>
                    <span class="status-text">Loading...</span>
                </div>
                <div class="last-updated" id="lastUpdated">--:--:--</div>
            </div>
        </header>

        <!-- Symbol Toggle -->
        <div class="symbol-toggle">
            <button class="toggle-btn active" data-symbol="NIFTY">NIFTY</button>
            <button class="toggle-btn" data-symbol="BANKNIFTY">BANKNIFTY</button>
            <button class="toggle-btn" data-symbol="FINNIFTY">FINNIFTY</button>
            <button class="toggle-btn" data-symbol="MIDCPNIFTY">MIDCAP</button>
        </div>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="dashboard">
                <span class="tab-icon">üéØ</span>
                Index
            </button>
            <button class="nav-tab" data-tab="stocks">
                <span class="tab-icon">üìä</span>
                Stocks
            </button>
            <button class="nav-tab" data-tab="oi-analysis">
                <span class="tab-icon">üìà</span>
                OI Chain
            </button>
            <button class="nav-tab" data-tab="pre-market">
                <span class="tab-icon">üåç</span>
                Pre-Market
            </button>
        </nav>

        <!-- Tab Content -->
        <main class="tab-content">
            <!-- Dashboard Tab -->
            <section id="dashboard" class="tab-pane active">
                <!-- Symbol Display Banner -->
                <div class="symbol-banner" id="symbolBanner">
                    <span class="symbol-name" id="currentSymbol">NIFTY</span>
                    <span class="symbol-subtitle">Intraday Sentiment</span>
                </div>

                <!-- Sentiment Gauge -->
                <div class="gauge-container">
                    <div class="gauge-wrapper">
                        <svg class="gauge-svg" viewBox="0 0 200 120">
                            <!-- Background arc -->
                            <path class="gauge-bg" d="M 20 100 A 80 80 0 0 1 180 100" />
                            <!-- Colored segments -->
                            <path class="gauge-segment gauge-red" d="M 20 100 A 80 80 0 0 1 60 35" />
                            <path class="gauge-segment gauge-yellow" d="M 60 35 A 80 80 0 0 1 140 35" />
                            <path class="gauge-segment gauge-green" d="M 140 35 A 80 80 0 0 1 180 100" />
                            <!-- Needle -->
                            <line class="gauge-needle" id="gaugeNeedle" x1="100" y1="100" x2="100" y2="30" />
                            <circle class="gauge-center" cx="100" cy="100" r="8" />
                        </svg>
                        <div class="gauge-labels">
                            <span class="label-sell">SELL</span>
                            <span class="label-neutral">NEUTRAL</span>
                            <span class="label-buy">BUY</span>
                        </div>
                    </div>
                    <div class="gauge-score">
                        <span class="score-value" id="sentimentScore">--</span>
                        <span class="score-label" id="sentimentLabel">Loading...</span>
                    </div>
                </div>

                <!-- Alert Box -->
                <div class="alert-box" id="alertBox">
                    <span class="alert-icon">‚ö†Ô∏è</span>
                    <span class="alert-text" id="alertText">Analyzing market sentiment...</span>
                </div>

                <!-- Metric Cards -->
                <div class="metrics-grid">
                    <!-- Price Card -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">üí∞</span>
                            <span class="metric-title">SPOT PRICE</span>
                        </div>
                        <div class="metric-value" id="spotPrice">--</div>
                        <div class="metric-change" id="priceChange">
                            <span class="change-value">--</span>
                            <span class="change-pct">(--)</span>
                        </div>
                    </div>

                    <!-- VWAP Card -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">üìè</span>
                            <span class="metric-title">VWAP</span>
                        </div>
                        <div class="metric-value" id="vwapValue">--</div>
                        <div class="metric-status" id="vwapStatus">--</div>
                    </div>

                    <!-- PCR Card -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">‚öñÔ∏è</span>
                            <span class="metric-title">PCR</span>
                        </div>
                        <div class="metric-value" id="pcrValue">--</div>
                        <div class="metric-trend" id="pcrTrend">
                            <span class="trend-icon">--</span>
                            <span class="trend-text">--</span>
                        </div>
                    </div>
                </div>

                <!-- Phase 15: Pro Trader Panel -->
                <div class="pro-trader-panel" id="proTraderPanel">
                    <h3 class="panel-title">üéØ Pro Trader Dashboard</h3>

                    <!-- Advanced Indicators Row -->
                    <div class="advanced-indicators">
                        <!-- VIX Card -->
                        <div class="indicator-card" id="vixCard">
                            <div class="indicator-header">
                                <span class="indicator-icon">‚ö°</span>
                                <span class="indicator-title">INDIA VIX</span>
                            </div>
                            <div class="indicator-value" id="vixValue">--</div>
                            <div class="indicator-status" id="vixStatus">Loading...</div>
                            <div class="indicator-action" id="vixAction">--</div>
                        </div>

                        <!-- Market Breadth Card -->
                        <div class="indicator-card" id="breadthCard">
                            <div class="indicator-header">
                                <span class="indicator-icon">üìä</span>
                                <span class="indicator-title">MARKET BREADTH</span>
                            </div>
                            <div class="indicator-value" id="breadthValue">
                                <span class="adv">--</span> ‚Üë | <span class="dec">--</span> ‚Üì
                            </div>
                            <div class="indicator-status" id="breadthStatus">Loading...</div>
                            <div class="indicator-action" id="breadthAction">--</div>
                        </div>

                        <!-- Straddle/Theta Card -->
                        <div class="indicator-card" id="straddleCard">
                            <div class="indicator-header">
                                <span class="indicator-icon">‚è±Ô∏è</span>
                                <span class="indicator-title">THETA DECAY</span>
                            </div>
                            <div class="indicator-value" id="straddleValue">‚Çπ--</div>
                            <div class="indicator-status" id="straddleStatus">ATM Straddle</div>
                            <div class="indicator-action" id="straddleAction">--</div>
                        </div>
                    </div>

                    <!-- OI Ladder -->
                    <div class="oi-ladder-container" id="oiLadderContainer">
                        <h4 class="ladder-title">üìà OI Ladder (Support/Resistance)</h4>
                        <div class="ladder-grid">
                            <div class="ladder-section resistance-section">
                                <div class="ladder-label">RESISTANCE (Call OI)</div>
                                <div class="ladder-levels" id="resistanceLevels">
                                    <div class="ladder-item">Loading...</div>
                                </div>
                            </div>
                            <div class="ladder-section support-section">
                                <div class="ladder-label">SUPPORT (Put OI)</div>
                                <div class="ladder-levels" id="supportLevels">
                                    <div class="ladder-item">Loading...</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pro Trader Checklist -->
                    <div class="trader-checklist" id="traderChecklist">
                        <h4 class="checklist-title">‚úÖ Morning Checklist</h4>
                        <div class="checklist-items">
                            <div class="checklist-item" id="checkBreadth">
                                <span class="check-icon">‚¨ú</span>
                                <span class="check-text">Market Breadth Checked</span>
                                <span class="check-result" id="checkBreadthResult">--</span>
                            </div>
                            <div class="checklist-item" id="checkPCR">
                                <span class="check-icon">‚¨ú</span>
                                <span class="check-text">PCR Analysis</span>
                                <span class="check-result" id="checkPCRResult">--</span>
                            </div>
                            <div class="checklist-item" id="checkVWAP">
                                <span class="check-icon">‚¨ú</span>
                                <span class="check-text">Price vs VWAP</span>
                                <span class="check-result" id="checkVWAPResult">--</span>
                            </div>
                            <div class="checklist-item" id="checkVIX">
                                <span class="check-icon">‚¨ú</span>
                                <span class="check-text">VIX Level</span>
                                <span class="check-result" id="checkVIXResult">--</span>
                            </div>
                            <div class="checklist-item" id="checkOI">
                                <span class="check-icon">‚¨ú</span>
                                <span class="check-text">OI Levels Identified</span>
                                <span class="check-result" id="checkOIResult">--</span>
                            </div>
                        </div>
                        <div class="checklist-verdict" id="checklistVerdict">
                            <span class="verdict-icon">üéØ</span>
                            <span class="verdict-text">Complete checklist for trading recommendation</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- OI Analysis Tab -->
            <section id="oi-analysis" class="tab-pane">
                <!-- Symbol Display for OI -->
                <div class="symbol-banner small" id="oiSymbolBanner">
                    <span class="symbol-name" id="oiCurrentSymbol">NIFTY</span>
                    <span class="symbol-subtitle">Option Chain Analysis</span>
                </div>

                <div class="oi-header">
                    <h2>Option Chain OI Analysis</h2>
                    <div class="oi-legend">
                        <span class="legend-item">
                            <span class="legend-bar green"></span>
                            Bullish Signal
                        </span>
                        <span class="legend-item">
                            <span class="legend-bar red"></span>
                            Bearish Signal
                        </span>
                    </div>
                </div>

                <div class="oi-table-container">
                    <table class="oi-table">
                        <thead>
                            <tr>
                                <th class="th-call">CALL OI CHG</th>
                                <th class="th-strike">STRIKE</th>
                                <th class="th-put">PUT OI CHG</th>
                            </tr>
                        </thead>
                        <tbody id="oiTableBody">
                            <!-- Dynamic rows will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Stocks Tab -->
            <section id="stocks" class="tab-pane">
                <div class="stocks-header">
                    <h2>üìä Stock Screener</h2>
                    <p class="stocks-subtitle">Individual stock recommendations based on technical analysis</p>
                </div>

                <!-- Search Box -->
                <div class="stock-search">
                    <input type="text" id="stockSearch" class="search-input"
                        placeholder="üîç Search stock (e.g., RELIANCE, TCS, HDFC)">
                    <button id="searchBtn" class="search-btn">Search</button>
                </div>

                <!-- Filter Buttons -->
                <div class="stock-filters">
                    <button class="filter-btn active" data-filter="buy">üü¢ Buy Signals</button>
                    <button class="filter-btn" data-filter="sell">üî¥ Sell Signals</button>
                    <button class="filter-btn" data-filter="top_gainers">üìà Gainers</button>
                    <button class="filter-btn" data-filter="top_losers">üìâ Losers</button>
                    <button class="filter-btn" data-filter="all">üìã All</button>
                </div>

                <!-- Summary Cards -->
                <div class="stock-summary" id="stockSummary">
                    <div class="summary-card buy">
                        <span class="summary-count" id="buyCount">--</span>
                        <span class="summary-label">Buy Signals</span>
                    </div>
                    <div class="summary-card sell">
                        <span class="summary-count" id="sellCount">--</span>
                        <span class="summary-label">Sell Signals</span>
                    </div>
                    <div class="summary-card hold">
                        <span class="summary-count" id="holdCount">--</span>
                        <span class="summary-label">Hold</span>
                    </div>
                </div>

                <!-- Stock Cards List -->
                <div class="stock-list" id="stockList">
                    <!-- Dynamic stock cards will be inserted here -->
                </div>
            </section>

            <!-- Pre-Market Analysis Tab -->
            <section id="pre-market" class="tab-pane">
                <div class="pre-market-header">
                    <h2>üåç Pre-Market Analysis</h2>
                    <p class="pre-market-subtitle">Next Trading Day Preparation</p>
                    <button class="refresh-btn" onclick="loadPreMarketAnalysis()">üîÑ Refresh</button>
                </div>

                <!-- Overall Mood -->
                <div class="mood-banner" id="overallMood">
                    <span class="mood-icon">üîÑ</span>
                    <span class="mood-text">Analyzing markets...</span>
                </div>

                <!-- Global Markets Grid -->
                <div class="section-header">üìä Global Markets</div>
                <div class="global-markets-grid" id="globalMarketsGrid">
                    <!-- Dynamic market cards will be inserted here -->
                    <div class="market-card loading">
                        <span class="market-name">Loading...</span>
                    </div>
                </div>

                <!-- News Sentiment -->
                <div class="section-header">üì∞ News Sentiment</div>
                <div class="news-sentiment-summary" id="newsSentimentSummary">
                    <span class="sentiment-icon">üîÑ</span>
                    <span class="sentiment-text">Analyzing news...</span>
                </div>
                <div class="news-list" id="newsList">
                    <!-- Dynamic news cards will be inserted here -->
                </div>

                <!-- Tomorrow's Top Picks -->
                <div class="section-header">üéØ Tomorrow's Top Picks</div>
                <div class="top-picks-list" id="topPicksList">
                    <!-- Dynamic pick cards will be inserted here -->
                    <div class="pick-card loading">
                        <span>Analyzing stocks...</span>
                    </div>
                </div>

                <!-- Disclaimer -->
                <div class="pre-market-disclaimer">
                    ‚ö†Ô∏è This analysis is for educational purposes only. Past performance is not indicative of future
                    results. Always do your own research (DYOR) before making any investment decisions.
                </div>
            </section>
        </main>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-spinner"></div>
            <p>Fetching market data...</p>
        </div>

        <!-- Today's Best Pick Popup -->
        <div class="best-pick-overlay" id="bestPickOverlay" style="display: none;">
            <div class="best-pick-popup">
                <button class="best-pick-close" onclick="closeBestPick()">‚úï</button>
                <div class="best-pick-header">
                    <span class="best-pick-emoji">üéØ</span>
                    <h2>Today's Best Pick</h2>
                    <p class="best-pick-subtitle">Analyzed 200+ stocks using 5 indicators</p>
                </div>
                <div class="best-pick-stock">
                    <span class="best-pick-symbol" id="bestPickSymbol">LOADING...</span>
                    <span class="best-pick-name" id="bestPickName">Processing stocks...</span>
                    <span class="best-pick-score" id="bestPickScore">Score: --</span>
                </div>
                <div class="best-pick-verdict" id="bestPickVerdict">
                    üîÑ Analyzing...
                </div>
                <div class="best-pick-levels">
                    <div class="level-box entry">
                        <span class="level-label">üü¢ BUY (Entry)</span>
                        <span class="level-price" id="bestPickEntry">‚Çπ--</span>
                    </div>
                    <div class="level-box target">
                        <span class="level-label">üéØ TARGET</span>
                        <span class="level-price" id="bestPickTarget">‚Çπ--</span>
                    </div>
                    <div class="level-box stoploss">
                        <span class="level-label">üî¥ STOPLOSS</span>
                        <span class="level-price" id="bestPickStoploss">‚Çπ--</span>
                    </div>
                </div>
                <div class="best-pick-indicators" id="bestPickIndicators">
                    <!-- Indicators will be populated by JS -->
                </div>
                <div class="best-pick-reason" id="bestPickReason">
                    Loading reasons...
                </div>
                <div class="best-pick-disclaimer">
                    ‚ö†Ô∏è Educational purpose only. DYOR before investing.
                </div>
            </div>
        </div>

        <!-- Error Toast -->
        <div class="error-toast" id="errorToast">
            <span class="toast-icon">‚ö†Ô∏è</span>
            <span class="toast-message" id="toastMessage">Error loading data</span>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>